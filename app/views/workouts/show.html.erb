<p style="color: green"><%= notice %></p>
<!-- 3D Workout Visualization - Full Screen -->
<div class="workout-3d-fullscreen">
  <div
    data-controller="three-workout"
    data-three-workout-workout-data-value="<%= @workout.as_json(include_waypoints: true).to_json %>"
    data-three-workout-waypoints-value="<%= @workout.waypoints.map(&:to_h).to_json %>"
    class="three-container">
    <canvas
      data-three-workout-target="canvas"
      class="three-canvas">
    </canvas>
    <!-- Workout Details Overlay -->
    <div class="workout-details-overlay">
      <div class="workout-info">
        <h2>Workout Details</h2>
        <div class="workout-stats">
          <div class="stat">
            <span class="label">Date:</span>
            <span class="value"><%= @workout.start_time.strftime('%-m/%-d/%y @%-I:%M%P') %></span>
          </div>
          <div class="stat">
            <span class="label">Duration:</span>
            <span class="value"><%= Time.at(@workout.duration).utc.strftime('%-Hh:%Mm:%Ss') %></span>
          </div>
          <div class="stat">
            <span class="label">Distance:</span>
            <span class="value"><%= @workout.distance %></span>
          </div>
          <div class="stat">
            <span class="label">Avg Speed:</span>
            <span class="value"><%= @workout.average_speed.round(1) %> m/s</span>
          </div>
          <div class="stat">
            <span class="label">Max Speed:</span>
            <span class="value"><%= @workout.max_speed.round(1) %> m/s</span>
          </div>
        </div>
      </div>
      <div class="workout-controls">
        <%= link_to "Edit", edit_workout_path(@workout), class: "btn btn-edit" %>
        <%= link_to "Back to Workouts", workouts_path, class: "btn btn-back" %>
        <%= button_to "Delete", @workout, method: :delete, class: "btn btn-delete", data: { confirm: 'Are you sure?' } %>
      </div>
    </div>
    <!-- 3D Controls Overlay -->
    <div class="controls-overlay">
      <div>ðŸŽ® <strong>3D Controls:</strong></div>
      <div>â€¢ Drag to rotate view</div>
      <div>â€¢ Scroll to zoom</div>
      <div>â€¢ Green sphere = Start</div>
      <div>â€¢ Red sphere = End</div>
      <div>â€¢ Line color = Speed (green=slow, red=fast)</div>
    </div>
  </div>
</div>
